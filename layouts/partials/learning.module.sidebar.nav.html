{{- $url := .RelPermalink -}}
{{- $page := .GetPage $url -}}
{{- $root := relURL (printf "/%s/" .Section) -}}
{{- $DATA := (index $.Site.Data .Section) -}}

{{- $title := default (replace (title .Section) "-" " ") $DATA.name -}}

{{- $folder := "" }}
{{- $folderTitle := "" }}

{{- range $index, $ancestor := .Ancestors -}}
{{- if eq $index 0 -}}
{{- $folder = $ancestor.RelPermalink -}}
{{- $folderTitle = $ancestor.Title -}}
{{- end -}}
{{- end -}}



{{- partial "docs.page.logo" -}}
<div class="DocsSidebar--section DocsSidebar--docs-title-section">
    <a aria-current="page" class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href="{{ $folder }}">
      <div class="DocsNavLogoLockup">
        <div class="DocsNavLogoLockup--logo">
        </div>

        <span class="DocsNavLogoLockup--text">
          <span class="DocsSidebar--docs-title-text-scaler" style="--length:{{ len $title }}">{{ $folderTitle }}</span>
        </span>
      </div>
    </a>
  </div>


    <div class="DocsSidebar--section DocsSidebar--nav-section" style="position:relative;overflow:hidden;width:100%;height:100%">
      <div style="position: absolute; inset: 0px; overflow-y: auto; margin-right: 0px; margin-bottom: 0px;">
        <div class="DocsSidebar--nav-section-shadow" style="opacity: 0;"></div>

        <ul class="DocsSidebar--nav">

          {{- $current := .Page.RelPermalink -}}
          {{- $len := len (split $current "/") -}}
            {{- range .FirstSection.Pages.ByWeight -}}
            {{- $x := .RelPermalink -}}

              {{- $delta := sub (len (split $x "/")) $len -}}
                
              {{- if and (hasPrefix $x $current) (lt $delta 2) -}}
                {{- partial "sidebar.navitem" (dict "Context" . "Depth" 1 "Active" $url) }}
              {{- else if not (hasPrefix $x $current) -}}
                {{- partial "sidebar.navitem" (dict "Context" . "Depth" 1 "Active" $url) }}
            {{- end -}}
          {{- end -}}
        </ul>
      </div>
      <div style="position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px">
        <div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div>
      </div>
      <div style="position:absolute;width:6px;display:none" class="Scrollbars--track Scrollbars--track-vertical">
        <div style="position:relative;display:block;width:100%" class="Scrollbars--thumb Scrollbars--thumb-vertical"></div>
      </div>
    </div>
    <div class="toggleSidebar" >
    <button id="toggleSidebarButton" style="width: 2em; height: 2em;" title="Click to collapse and expand the sidebar navigation">
      <svg id="toggleSidebarSVG" aria-hidden="true" class="" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V3a1 1 0 0 0-1-1zm-10.407.993l-4.3 4.3a1 1 0 0 0 0 1.414l4.3 4.3a1 1 0 0 0 1.415-1.416L3.417 9H10a1 1 0 1 0 0-2H3.417l2.591-2.591a1 1 0 1 0-1.415-1.416z"></path></svg>
    </button>
  </div>
  </div>
  <div class="DocsSidebar--shadow"></div>
</div>